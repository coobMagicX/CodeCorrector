Intent: The purpose of the test `handlesInvalidDoctypes` is to verify that the system can gracefully handle and parse invalid or incomplete DOCTYPE declarations without throwing exceptions or errors. The test checks if the parser can correctly handle empty DOCTYPEs, DOCTYPEs directly followed by HTML content, and DOCTYPEs containing null characters.

Repair strategy: Modify the `DocumentType` constructor or the parser to add validation or sanitization for the inputs `name`, `publicId`, and `systemId`. Specifically, handle cases where `name` might be empty or contain invalid characters, such as null characters. The constructor should either default to valid values or the parser should be able to recover gracefully from such scenarios, potentially by ignoring the DOCTYPE if it is malformed. Consider implementing a fallback mechanism or a more robust error handling within the parser to ensure it does not fail when encountering unusual or unexpected DOCTYPE formats.