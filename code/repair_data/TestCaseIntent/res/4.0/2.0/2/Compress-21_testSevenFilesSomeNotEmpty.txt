Intent: The purpose of the test case `testSevenFilesSomeNotEmpty` seems to be to evaluate the function `testCompress252` with specific parameters, likely to compress data for 7 files where some of them are not empty, and test the correct handling of bits when writing them to a header.

Repair strategy: The failure in the test case may be due to the mishandling of the final bits in the writeBits method when the total number of bits (`length`) is not a multiple of 8. This can lead to incorrect or incomplete data being written for the last byte. The repair should involve adjusting the condition in the writeBits method that checks and handles the remaining bits that do not form a complete byte. Ensure that the last bits are correctly shifted and written into the output even when the total bit length is not divisible by 8.