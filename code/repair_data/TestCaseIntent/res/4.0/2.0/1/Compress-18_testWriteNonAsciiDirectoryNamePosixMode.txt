Intent: The test `testWriteNonAsciiDirectoryNamePosixMode` is intended to verify that the Tar archive correctly handles non-ASCII directory names when creating a Tar entry, ensuring that the entry retains the specified name and is correctly recognized as a directory after being processed and read back from the archive.

Repair strategy: Analyze and adjust the `writePaxHeaders` method in the source code to ensure it correctly handles non-ASCII characters in directory names. One potential issue could be related to the calculation and encoding of header data size in the `writePaxHeaders` method, specifically ensuring that the size calculation takes into account the UTF-8 encoding which can increase the byte length of non-ASCII characters. Modify the encoding logic to accurately reflect the length of the header data, and ensure proper handling of directory entries in the PAX headers when non-ASCII characters are used. Ensure that the `writePaxHeaders` method does not alter the directory flag of the entry due to incorrect handling of the trailing slash in directory names when computing header sizes or stripping to 7 bits.