public static Number createNumber(String str) throws NumberFormatException {
    if (str == null || str.isEmpty()) {
        return null;
    }
    
    // Rest of the method remains unchanged...
}